{"version":3,"sources":["webpack:///./src/views/Invoices.vue?e880","webpack:///./src/views/Invoices.vue","webpack:///./node_modules/export-from-json/dist/esm/utils.js","webpack:///./node_modules/export-from-json/dist/esm/processors.js","webpack:///./node_modules/export-from-json/dist/esm/converters.js","webpack:///./node_modules/export-from-json/dist/esm/exportFromJSON.js","webpack:///./node_modules/export-from-json/dist/esm/index.js","webpack:///./src/views/Invoices.vue?5fb2","webpack:///./src/service/FamilyGroupService.js"],"names":["class","for","style","colspan","name","value","filterBy","famGrp","disabled","allStudents","length","student","familyGroups","range","from","showIcon","selectionMode","to","options","optionLabel","placeholder","allSessions","status","statusOptions","tutor","tutors","loading","strokeWidth","fullname","formatRange","filteredSessions","label","save","rows","dataKey","rowHover","empty","footer","totalTime","totalRate","header","body","getDate","slotProps","data","field","formatTime","student_object","tutor_object","formatHours","total","payAll","isArray","Object","prototype","toString","call","assert","condition","msg","Error","getValues","keys","map","key","getKeys","getEntries","normalizeFileName","fileName","extension","suffix","extensionPattern","RegExp","replace","normalizeXMLName","trim","indent","spaces","Array","join","stripHTML","text","_","$1","generateDataURI","content","type","encodeURIComponent","downloadFile","dataURI","anchor","document","createElement","href","download","setAttribute","appendChild","click","removeChild","__read","o","n","m","Symbol","iterator","r","e","i","ar","next","done","push","error","_prepareData","MESSAGE_VALID_JSON_FAIL","JSON","parse","_a","_createJSONData","replacer","space","stringify","_createTableMap","reduce","tMap","rowKVs","rowIndex","kv","columnValues","create","createCSVData","delimiter","tableMap","head","columns","column","mergedColumn","_renderTableHTMLText","createXLSData","createXMLData","_renderXML","tagName","arrayElementTag","tag","indentSpaces","undefined","item","_b","String","contentWithWrapper","_c","exportType","_d","_e","_f","processor","_g","withBOM","_h","MESSAGE_IS_ARRAY_FAIL","MESSAGE_UNKNOWN_EXPORT_TYPE","safeData","JSONData","BOM","CSVData","exportFromJSON","types","txt","json","csv","xls","xml","processors","filteredStudents","Date","day","allStudentsOption","allTutorsOption","studentService","familyGroupService","appointmentService","tutorService","created","this","StudentService","FamilyGroupService","AppointmentService","TutorService","mounted","getUnarchivedStudents","first_name","last_name","unshift","getUnarchivedTutors","updateSessions","showWarn","getFamilyGroups","computed","a","c","hours","nos_of_hours","minutes","nos_of_mins","minuteField","lastNames","split","watch","newGrp","updateFilter","newStudent","handler","deep","methods","isInRange","date","startOf","endOf","contains","allStudentsMode","allTutorsMode","filter","session","id","paid","start_date","ids","students","st","includes","getAppointments","results","foundStudent","find","foundTutor","hourFee","rate","quarterlyRate","minutesFee","showFail","message","updateStudentToPaid","format","end_date","showSuccess","updateFamilyToPaid","family_group","console","log","response","formatDate","sesh","Time","Name","Tutor","Hours","Amount","now","summary","detail","$toast","add","severity","life","render","username","process","password","url","axios","get","auth","then","res","family_groups","catch","err","group","post","input"],"mappings":"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","file":"js/chunk-45128026.c907a5e7.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Invoices.vue?vue&type=style&index=0&id=7f6bb049&lang=css\"","<template>\n  <div class=\"p-grid\">\n    <div class=\"p-col-12\">\n      <div class=\"card\">\n        <h5>Filter Options</h5>\n        <div class=\"p-fluid p-formgrid p-grid\">\n          <div class=\"p-field p-col-12\">\n            <label>Filter by</label>\n            <div class=\"p-grid\">\n              <div class=\"p-col-6 p-mt-3\">\n                <div class=\"p-field-radiobutton\">\n                  <RadioButton\n                    name=\"option\"\n                    value=\"student\"\n                    v-model=\"filterBy\"\n                    @click=\"famGrp = null\"\n                    :disabled=\"allStudents == null || allStudents.length == 0\"\n                  />\n                  <label for=\"option1\">Student</label>\n                </div>\n              </div>\n              <div class=\"p-col-6 p-mt-3\">\n                <div class=\"p-field-radiobutton\">\n                  <RadioButton\n                    name=\"option\"\n                    value=\"famGrp\"\n                    v-model=\"filterBy\"\n                    @click=\"student = null\"\n                    :disabled=\"familyGroups == null || familyGroups.length == 0\"\n                  />\n                  <label>Family Group</label>\n                </div>\n              </div>\n              <div class=\"p-field p-col-6\">\n                <label>From</label>\n                <Calendar\n                  v-model=\"range.from\"\n                  :showIcon=\"true\"\n                  selectionMode=\"single\"\n                ></Calendar>\n              </div>\n              <div class=\"p-field p-col-6\">\n                <label>To</label>\n                <Calendar\n                  v-model=\"range.to\"\n                  :showIcon=\"true\"\n                  selectionMode=\"single\"\n                ></Calendar>\n              </div>\n              <div\n                v-if=\"filterBy === 'student'\"\n                class=\"p-field p-col-12 p-md-6\"\n              >\n                <label>Student</label>\n                <Dropdown\n                  v-model=\"student\"\n                  :options=\"allStudents\"\n                  optionLabel=\"fullname\"\n                  placeholder=\"Select One\"\n                  :disabled=\"\n                    allStudents == null ||\n                    allSessions == null ||\n                    allStudents.length <= 1\n                  \"\n                ></Dropdown>\n              </div>\n              <div v-if=\"filterBy === 'famGrp'\" class=\"p-field p-col-12 p-md-6\">\n                <label>Family Group</label>\n                <Dropdown\n                  v-model=\"famGrp\"\n                  :options=\"familyGroups\"\n                  placeholder=\"Select One\"\n                  optionLabel=\"name\"\n                  :disabled=\"familyGroups == null || allSessions == null\"\n                ></Dropdown>\n              </div>\n              <div class=\"p-field p-col-12 p-md-3\">\n                <label>Status</label>\n                <Dropdown v-model=\"status\" :options=\"statusOptions\"></Dropdown>\n              </div>\n              <div class=\"p-field p-col-12 p-md-3\">\n                <label>Tutor</label>\n                <Dropdown\n                  placeholder=\"Select One\"\n                  v-model=\"tutor\"\n                  :options=\"tutors\"\n                  optionLabel=\"fullname\"\n                  :disabled=\"tutors.length === 0\"\n                ></Dropdown>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <ProgressSpinner v-if=\"loading\" strokeWidth=\"3\"/>\n\n    <div\n      class=\"p-col-12\"\n      v-if=\"\n        (filterBy === 'student' && student != null) ||\n        (filterBy === 'famGrp' && famGrp != null)\n      \"\n    >\n      <div class=\"card\">\n        <!-- <p>\n          Use this page to start from scratch and place your custom content.\n        </p> -->\n        <div class=\"p-grid\">\n          <div class=\"p-col-12 p-md-12\">\n            <div class=\"card\">\n              <!-- <h5>Amount Breakdown</h5> -->\n              <div class=\"header\">\n                <h5>\n                  Statement of\n                  <span v-if=\"filterBy === 'student'\">\n                    <b>{{ student.fullname }}</b>\n                  </span>\n                  <span v-if=\"filterBy === 'famGrp'\">\n                    the <b>{{ famGrp.name }} Family</b>\n                  </span>\n                  from <u>{{ formatRange() }}</u>\n                </h5>\n                <Button\n                  :disabled=\"filteredSessions.length == 0\"\n                  label=\"Save to Excel\"\n                  class=\"p-button-rounded p-button-outlined p-button-success p-mb-3\"\n                  @click=\"save\"\n                />\n                <!-- <div v-if=\"filteredSessions.length!=0\">\n  <download-csv :data=\"filteredSessions\">\n    Download Data\n</download-csv>\n</div> -->\n              </div>\n              <DataTable\n                :value=\"filteredSessions\"\n                class=\"p-datatable-customers\"\n                :rows=\"10\"\n                dataKey=\"id\"\n                :rowHover=\"true\"\n                :loading=\"loading\"\n              >\n                <!-- <template #header>\n                  <div class=\"table-header\">\n                    List of Students\n                    <span class=\"p-input-icon-left\">\n                      <i class=\"pi pi-search\" />\n                      <InputText\n                        v-model=\"filters1['global']\"\n                        placeholder=\"Global Search\"\n                      />\n                    </span>\n                  </div>\n                </template> -->\n                <template #empty> No sessions found. </template>\n                <template #loading> Loading sessions. Please wait. </template>\n                <Column header=\"Date\">\n                  <template #body=\"slotProps\">\n                    {{ getDate(slotProps.data) }}\n                  </template>\n                </Column>\n                <Column field=\"sessions\" header=\"Time\">\n                  <template #body=\"slotProps\">\n                    <span>{{ formatTime(slotProps.data) }}</span>\n                  </template>\n                </Column>\n                <Column field=\"name\" header=\"Name\">\n                  <template #body=\"slotProps\">\n                    {{ slotProps.data.student_object.fullname }}\n                  </template>\n                </Column>\n                <Column header=\"Tutor\">\n                  <template #body=\"slotProps\">\n                    {{ slotProps.data.tutor_object.fullname }}\n                  </template>\n                </Column>\n                <Column header=\"Hours\">\n                  <template #body=\"slotProps\">\n                    {{ formatHours(slotProps.data) }}\n                  </template>\n                </Column>\n                <!-- <Column field=\"rate\" header=\"Rate\">\n                  <template #body=\"slotProps\">\n                    <span>{{ slotProps.data.student_object.rate }}</span>\n                  </template>\n                </Column> -->\n                <Column field=\"total\" header=\"Amount\">\n                  <template #body=\"slotProps\">\n                    <span>{{ slotProps.data.total }}</span>\n                  </template>\n                </Column>\n                <template #footer>\n                  <table style=\"text-align: left\">\n                    <tr>\n                      <td colspan=\"4\"></td>\n                      <td style=\"padding-left: 15px\">\n                        {{ totalTime }}\n                      </td>\n                      <td style=\"padding-left: 15px\">\n                        {{ totalRate }}\n                      </td>\n                    </tr>\n                  </table>\n                </template>\n              </DataTable>\n              <div\n                class=\"p-formgroup p-mt-2\"\n                v-if=\"status == 'Not Paid' && filteredSessions?.length != 0\"\n              >\n                <Button label=\"Update All to Paid\" @click=\"payAll\"></Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport StudentService from \"../service/StudentService\";\nimport AppointmentService from \"../service/AppointmentService\";\nimport FamilyGroupService from \"../service/FamilyGroupService\";\nimport TutorService from \"../service/TutorService\";\nimport Moment from \"moment\";\nimport { extendMoment } from \"moment-range\";\nimport exportFromJSON from \"export-from-json\";\n\nconst moment = extendMoment(Moment);\n\nexport default {\n  data() {\n    return {\n      filterBy: \"student\",\n      allStudents: null,\n      filteredStudents: [],\n      student: null,\n      famGrp: null,\n      range: {\n        from: new Date(moment().day(1)),\n        to: new Date(moment().day(7)),\n      },\n      status: \"Not Paid\",\n      statusOptions: [\"Paid\", \"Not Paid\", \"Both\"],\n      familyGroups: null,\n      allSessions: null,\n      filteredSessions: [],\n      loading: true,\n      tutors: [],\n      tutor: null,\n      allStudentsOption: {\n        fullname: \"All Students\",\n      },\n      allTutorsOption: {\n        fullname: \"All Tutors\",\n      },\n    };\n  },\n  studentService: null,\n  familyGroupService: null,\n  appointmentService: null,\n  tutorService: null,\n  created() {\n    this.studentService = new StudentService();\n    this.familyGroupService = new FamilyGroupService();\n    this.appointmentService = new AppointmentService();\n    this.tutorService = new TutorService();\n  },\n  async mounted() {\n    this.allStudents = await this.studentService.getUnarchivedStudents();\n    // this.allStudents = this.allStudents.filter((s) => {\n    //   return !s.archive;\n    // });\n\n    this.allStudents = this.allStudents.map((student) => ({\n      ...student,\n      fullname: student.first_name + \" \" + student.last_name,\n    }));\n\n    this.allStudents.unshift(this.allStudentsOption);\n    this.tutors = await this.tutorService.getUnarchivedTutors();\n    this.tutors = this.tutors.map((tutor) => ({\n      ...tutor,\n      fullname: tutor.first_name + \" \" + tutor.last_name,\n    }));\n    await this.updateSessions();\n\n    this.tutors.unshift(this.allTutorsOption);\n    this.tutor = this.allTutorsOption;\n    if (this.allStudents.length > 1) {\n      this.student = this.allStudentsOption;\n    } else {\n      this.showWarn(\n        \"No Students Added\",\n        \"Add students first before viewing statements\"\n      );\n    }\n\n    this.familyGroups = await this.familyGroupService.getFamilyGroups();\n    this.loading = false;\n  },\n  computed: {\n    totalRate() {\n      return this.filteredSessions.length == 0\n        ? 0\n        : this.filteredSessions.reduce((a, c) => a + c.total, 0);\n      // return this.filteredStudents.length == 0\n      //   ? 0\n      //   : this.filteredStudents.reduce((a, c) => a + c.total, 0);\n    },\n    totalTime() {\n      let hours =\n        this.filteredSessions.length == 0\n          ? 0\n          : this.filteredSessions.reduce((a, c) => a + c.nos_of_hours, 0);\n\n      let minutes =\n        this.filteredSessions.length == 0\n          ? 0\n          : this.filteredSessions.reduce((a, c) => a + c.nos_of_mins, 0);\n\n      while (minutes >= 60) {\n        minutes -= 60;\n        hours += 1;\n      }\n\n      const minuteField = minutes === 0 ? \"\" : minutes + \"mins\";\n      return hours + \"hrs \" + minuteField;\n    },\n    lastNames() {\n      return this.allStudents == null\n        ? []\n        : this.allStudents.map(({ name }) => name.split(\" \")[1]);\n    },\n  },\n  watch: {\n    famGrp: function (newGrp) {\n      if (newGrp == null) {\n        this.filteredSessions = [];\n        return;\n      }\n      this.updateFilter();\n    },\n    student: function (newStudent) {\n      // console.log(newStudent);\n      // console.log(oldStudent);\n      if (newStudent == null) {\n        this.filteredSessions = [];\n        return;\n      }\n      this.updateFilter();\n    },\n    tutor: function () {\n      if (\n        (this.filterBy == \"student\" && this.student == null) ||\n        (this.filterBy == \"famGrp\" && this.famGrp == null)\n      ) {\n        return;\n      }\n      this.updateFilter();\n    },\n    range: {\n      handler: function () {\n        // console.log(newRange);\n        // console.log(oldRange);\n        if (\n          (this.filterBy == \"student\" && this.student == null) ||\n          (this.filterBy == \"famGrp\" && this.famGrp == null)\n        ) {\n          return;\n        }\n        this.updateFilter();\n      },\n      deep: true,\n    },\n    status: function () {\n      if (\n        (this.filterBy == \"student\" && this.student == null) ||\n        (this.filterBy == \"famGrp\" && this.famGrp == null)\n      ) {\n        return;\n      }\n      this.updateFilter();\n    },\n  },\n  methods: {\n    isInRange(date) {\n      date = moment(date);\n      var range = moment().range(\n        moment(this.range.from).startOf(\"day\"),\n        moment(this.range.to).endOf(\"day\")\n      );\n      return range.contains(date);\n    },\n    updateFilter() {\n      this.loading = true;\n\n      if (this.filterBy == \"student\") {\n        const allStudentsMode =\n          this.student.fullname === this.allStudentsOption.fullname;\n\n        const allTutorsMode =\n          this.tutor.fullname === this.allTutorsOption.fullname;\n\n        this.filteredSessions = this.allSessions.filter((session) => {\n          return (\n            (allStudentsMode ? true : session.student == this.student.id) &&\n            (allTutorsMode ? true : session.tutor == this.tutor.id) &&\n            (this.status == \"Both\"\n              ? true\n              : this.status == \"Paid\"\n              ? session.paid\n              : !session.paid) &&\n            this.isInRange(session.start_date)\n          );\n        });\n        // console.log(this.filteredSessions);\n      } else {\n        // const group = this.famGrp;\n        const ids = this.famGrp.students.map((st) => st.id);\n\n        const allTutorsMode =\n          this.tutor.fullname === this.allTutorsOption.fullname;\n\n        this.filteredSessions = this.allSessions.filter((session) => {\n          return (\n            ids.includes(session.student) &&\n            (allTutorsMode ? true : session.tutor == this.tutor.id) &&\n            (this.status == \"Both\"\n              ? true\n              : this.status == \"Paid\"\n              ? session.paid\n              : !session.paid) &&\n            this.isInRange(session.start_date)\n          );\n        });\n      }\n\n      this.loading = false;\n    },\n    async updateSessions() {\n      try {\n        this.allSessions = await this.appointmentService.getAppointments();\n        this.allSessions = this.allSessions.results;\n        this.allSessions = this.allSessions.map((session) => {\n          const foundStudent = this.allStudents.find((student) => {\n            return session.student == student.id;\n          });\n\n          const foundTutor = this.tutors.find((tutor) => {\n            return tutor.id == session.tutor;\n          });\n\n          const hourFee = session.nos_of_hours * foundStudent.rate;\n          const quarterlyRate = foundStudent.rate / 4;\n\n          let minutesFee = 0;\n          if (session.nos_of_mins == 15) minutesFee += quarterlyRate * 1;\n          else if (session.nos_of_mins == 30) minutesFee += quarterlyRate * 2;\n          else if (session.nos_of_mins == 45) minutesFee += quarterlyRate * 3;\n\n          const total = hourFee + minutesFee;\n          return {\n            ...session,\n            student_object: foundStudent,\n            total,\n            tutor_object: foundTutor,\n          };\n        });\n      } catch (err) {\n        // console.log(err.response.data);\n        this.showFail(\"Failed to retrieve sessions\", err.message);\n      }\n    },\n    async payAll() {\n      this.loading = true;\n      const allTutorsMode =\n        this.tutor.fullname === this.allTutorsOption.fullname;\n      try {\n        if (this.famGrp == null) {\n          const allStudentsMode =\n            this.student.fullname === this.allStudentsOption.fullname;\n          // pay all for student\n          await this.appointmentService.updateStudentToPaid({\n            student: allStudentsMode ? \"all\" : this.student.id,\n            tutor: allTutorsMode ? \"all\" : this.tutor.id,\n            start_date: moment(this.range.from)\n              .startOf(\"day\")\n              .format(\"YYYY-MM-DDTHH:mm:ss\"),\n            end_date: moment(this.range.to)\n              .endOf(\"day\")\n              .format(\"YYYY-MM-DDTHH:mm:ss\"),\n          });\n\n          await this.updateSessions();\n          this.updateFilter();\n\n          this.showSuccess(\n            \"Update Sucess\",\n            \"Successfully updated sessions of \" +\n              this.student.fullname +\n              \" to paid\"\n          );\n        } else if (this.student == null) {\n          // pay all for family group\n          await this.appointmentService.updateFamilyToPaid({\n            family_group: this.famGrp.id,\n            tutor: allTutorsMode ? \"all\" : this.tutor.id,\n            start_date: moment(this.range.from)\n              .startOf(\"day\")\n              .format(\"YYYY-MM-DDTHH:mm:ss\"),\n            end_date: moment(this.range.to)\n              .endOf(\"day\")\n              .format(\"YYYY-MM-DDTHH:mm:ss\"),\n          });\n\n          // console.log(res);\n\n          await this.updateSessions();\n          this.updateFilter();\n\n          this.showSuccess(\n            \"Update Sucess\",\n            \"Successfully updated sessions of family \" +\n              this.famGrp.name +\n              \" to paid\"\n          );\n        }\n      } catch (err) {\n        console.log(err.response.data);\n        this.showFail(\"Update Failed\", err.message);\n      }\n\n      this.loading = false;\n    },\n    formatRange() {\n      return (\n        moment(this.range.from).format(\"ddd MMM D, YYYY\") +\n        \" to \" +\n        moment(this.range.to).format(\"ddd MMM D, YYYY\")\n      );\n    },\n    formatDate(session) {\n      return moment(session.start_date).format(\"MMM D, YYYY - dddd\");\n    },\n    formatTime(session) {\n      return (\n        moment(session.start_date).format(\"h:mma\") +\n        \" - \" +\n        moment(session.end_date).format(\"h:mma\")\n      );\n    },\n    formatHours(session) {\n      const minuteField =\n        session.nos_of_mins === 0 ? \"\" : session.nos_of_mins + \"min\";\n      return session.nos_of_hours + \"hr \" + minuteField;\n    },\n    getDate(session) {\n      return moment(session.start_date).format(\"D-MMM\");\n    },\n    save() {\n      const data = this.filteredSessions.map((sesh) => ({\n        Date: this.getDate(sesh),\n        Time: this.formatTime(sesh),\n        Name: sesh.student_object.fullname,\n        Tutor: sesh.tutor_object.fullname,\n        Hours: this.formatHours(sesh),\n        Amount: sesh.total,\n      }));\n      data.push({\n        Date: \"\",\n        Time: \"\",\n        Name: \"\",\n        Tutor: \"\",\n        Hours: this.totalTime,\n        Amount: this.totalRate,\n      });\n      const fileName = \"statement-\" + Date.now();\n      const exportType = \"xls\";\n      exportFromJSON({\n        data,\n        fileName,\n        exportType,\n      });\n    },\n    showSuccess(summary, detail) {\n      this.$toast.add({\n        severity: \"success\",\n        summary,\n        detail,\n        life: 3000,\n      });\n    },\n    showFail(summary, detail) {\n      this.$toast.add({\n        severity: \"error\",\n        summary,\n        detail,\n        life: 3000,\n      });\n    },\n    showWarn(summary, detail) {\n      this.$toast.add({\n        severity: \"warn\",\n        summary,\n        detail,\n        life: 7000,\n      });\n    },\n  },\n};\n</script>\n\n<style>\n.custom .p-scrollpanel-wrapper {\n  border-right: 9px solid #f4f4f4;\n}\n\n.custom .p-scrollpanel-bar {\n  background-color: #1976d2;\n  opacity: 1;\n  transition: background-color 0.3s;\n}\n\n.custom .p-scrollpanel-bar:hover {\n  background-color: #135ba1;\n}\n\n.cardContent {\n  display: flex;\n}\n\n.cardContent p {\n  margin-bottom: 5px;\n}\n\n.cardContent img {\n  margin-right: 5px;\n}\n\ndiv.header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n@keyframes p-progress-spinner-color {\n    100%,\n    0% {\n        stroke: #0057e7;\n    }\n    40% {\n        stroke: #1863db;\n    }\n    66% {\n        stroke: rgb(78, 126, 202);\n    }\n    80%,\n    90% {\n        stroke: rgb(96, 137, 202);\n    }\n}\n</style>\n","export function isArray(data) {\n    return Object.prototype.toString.call(data) === '[object Array]';\n}\nexport function assert(condition, msg) {\n    if (!condition)\n        throw new Error(msg);\n}\nexport function getValues(data) {\n    return Object.keys(data).map(function (key) { return data[key]; });\n}\nexport function getKeys(data) {\n    return Object.keys(data);\n}\nexport function getEntries(data) {\n    return Object.keys(data).map(function (key) { return [key, data[key]]; });\n}\nexport function normalizeFileName(fileName, extension) {\n    var suffix = '.' + extension;\n    var extensionPattern = new RegExp(\"(\\\\\" + extension + \")?$\");\n    return fileName.replace(/\\s+/, '_').replace(extensionPattern, suffix);\n}\nexport function normalizeXMLName(name) {\n    '555xmlHello .  world!'.trim().replace(/^([0-9,;]|(xml))+/, '');\n    return name.replace(/[^_a-zA-Z 0-9:\\-\\.]/g, '').replace(/^([ 0-9-:\\-\\.]|(xml))+/i, '').replace(/ +/g, '-');\n}\nexport function indent(spaces) {\n    return Array(spaces + 1).join(' ');\n}\nexport function stripHTML(text) {\n    return text.replace(/([<>&])/g, function (_, $1) {\n        switch ($1) {\n            case '<': return '&lt;';\n            case '>': return '&gt;';\n            case '&': return '&amp;';\n            default: return '';\n        }\n    });\n}\n","export function generateDataURI(content, type) {\n    switch (type) {\n        case 'txt': {\n            return 'data:text/plain;charset=utf-8,' + encodeURIComponent(content);\n        }\n        case 'json': {\n            return 'data:application/json;charset=utf-8,' + encodeURIComponent(content);\n        }\n        case 'csv': {\n            return 'data:text/csv;charset=utf-8,\\uFEFF' + encodeURIComponent(content);\n        }\n        case 'xls': {\n            return 'data:application/vnd.ms-excel;charset=utf-8,' + encodeURIComponent(content);\n        }\n        case 'xml': {\n            return 'data:application/xml;charset=utf-8,' + encodeURIComponent(content);\n        }\n        default: {\n            return '';\n        }\n    }\n}\nexport function downloadFile(content, type, fileName) {\n    if (fileName === void 0) { fileName = 'download'; }\n    var dataURI = generateDataURI(content, type);\n    var anchor = document.createElement('a');\n    anchor.href = dataURI;\n    anchor.download = fileName;\n    anchor.setAttribute('style', 'visibility:hidden');\n    document.body.appendChild(anchor);\n    anchor.click();\n    document.body.removeChild(anchor);\n}\n","var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { isArray, getKeys, getValues, getEntries, normalizeXMLName, indent, stripHTML, assert } from './utils';\nexport function _prepareData(data) {\n    var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide a valid JSON';\n    try {\n        return typeof data === 'string' ? JSON.parse(data) : data;\n    }\n    catch (_a) {\n        throw new Error(MESSAGE_VALID_JSON_FAIL);\n    }\n}\nexport function _createJSONData(data, replacer, space) {\n    if (replacer === void 0) { replacer = null; }\n    var MESSAGE_VALID_JSON_FAIL = 'Invalid export data. Please provide valid JSON object';\n    try {\n        return JSON.stringify(data, replacer, space);\n    }\n    catch (_a) {\n        throw new Error(MESSAGE_VALID_JSON_FAIL);\n    }\n}\nexport function _createTableMap(data) {\n    return data.map(getEntries).reduce(function (tMap, rowKVs, rowIndex) {\n        return rowKVs.reduce(function (map, kv) {\n            var key = kv[0];\n            var value = kv[1];\n            var columnValues = map[key] || Array.from({ length: data.length }).map(function (_) { return ''; });\n            columnValues[rowIndex] =\n                (typeof value !== 'string' ? JSON.stringify(value) : value) || '';\n            map[key] = columnValues;\n            return map;\n        }, tMap);\n    }, Object.create(null));\n}\nexport function createCSVData(data, delimiter) {\n    if (delimiter === void 0) { delimiter = ','; }\n    if (!data.length)\n        return '';\n    var tableMap = _createTableMap(data);\n    var head = getKeys(tableMap).join(delimiter) + '\\r\\n';\n    var columns = getValues(tableMap).map(function (column) { return column.map(function (value) { return \"\\\"\" + value.replace(/\\\"/g, '\"\"') + \"\\\"\"; }); });\n    var rows = columns.reduce(function (mergedColumn, column) { return mergedColumn.map(function (value, rowIndex) { return \"\" + value + delimiter + column[rowIndex]; }); });\n    return head + rows.join('\\r\\n');\n}\nexport function _renderTableHTMLText(data) {\n    assert(data.length > 0);\n    var tableMap = _createTableMap(data);\n    var head = getKeys(tableMap);\n    var columns = getValues(tableMap).map(function (column) { return column.map(function (value) { return \"<td>\" + value + \"</td>\"; }); });\n    var rows = columns.reduce(function (mergedColumn, column) { return mergedColumn.map(function (value, rowIndex) { return \"\" + value + column[rowIndex]; }); });\n    return \"\\n    <table>\\n      <thead>\\n        <tr><th><b>\" + head.join('</b></th><th><b>') + \"</b></th></tr>\\n      </thead>\\n      <tbody>\\n        <tr>\" + rows.join(\"</tr>\\n        <tr>\") + \"</tr>\\n      </tbody>\\n    </table>\\n  \";\n}\nexport function createXLSData(data) {\n    if (!data.length)\n        return '';\n    var content = \"<html>\\n  <head>\\n    <meta charset=\\\"UTF-8\\\">\\n  </head >\\n  <body>\\n    \" + _renderTableHTMLText(data) + \"\\n  </body>\\n</html >\\n\";\n    return content;\n}\nexport function createXMLData(data) {\n    var content = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?><!DOCTYPE base>\\n\" + _renderXML(data, 'base') + \"\\n\";\n    return content;\n}\nfunction _renderXML(data, tagName, arrayElementTag, spaces) {\n    if (arrayElementTag === void 0) { arrayElementTag = 'element'; }\n    if (spaces === void 0) { spaces = 0; }\n    var tag = normalizeXMLName(tagName);\n    var indentSpaces = indent(spaces);\n    if (data === null || data === undefined) {\n        return indentSpaces + \"<\" + tag + \" />\";\n    }\n    var content = isArray(data)\n        ? data.map(function (item) { return _renderXML(item, arrayElementTag, arrayElementTag, spaces + 2); }).join('\\n')\n        : typeof data === 'object'\n            ? getEntries(data)\n                .map(function (_a) {\n                var _b = __read(_a, 2), key = _b[0], value = _b[1];\n                return _renderXML(value, key, arrayElementTag, spaces + 2);\n            }).join('\\n')\n            : indentSpaces + '  ' + stripHTML(String(data));\n    var contentWithWrapper = indentSpaces + \"<\" + tag + \">\\n\" + content + \"\\n\" + indentSpaces + \"</\" + tag + \">\";\n    return contentWithWrapper;\n}\n","import { assert, isArray, normalizeFileName } from './utils';\nimport { downloadFile } from './processors';\nimport { _prepareData, _createJSONData, createCSVData, createXLSData, createXMLData } from './converters';\nfunction exportFromJSON(_a) {\n    var data = _a.data, _b = _a.fileName, fileName = _b === void 0 ? 'download' : _b, _c = _a.exportType, exportType = _c === void 0 ? 'txt' : _c, _d = _a.replacer, replacer = _d === void 0 ? null : _d, _e = _a.space, space = _e === void 0 ? 4 : _e, _f = _a.processor, processor = _f === void 0 ? downloadFile : _f, _g = _a.withBOM, withBOM = _g === void 0 ? false : _g, _h = _a.delimiter, delimiter = _h === void 0 ? ',' : _h;\n    var MESSAGE_IS_ARRAY_FAIL = 'Invalid export data. Please provide an array of object';\n    var MESSAGE_UNKNOWN_EXPORT_TYPE = \"Can't export unknown data type \" + exportType + \".\";\n    var safeData = _prepareData(data);\n    var JSONData = _createJSONData(safeData, replacer, space);\n    switch (exportType) {\n        case 'txt': {\n            return processor(JSONData, exportType, normalizeFileName(fileName, 'txt'));\n        }\n        case 'json': {\n            return processor(JSONData, exportType, normalizeFileName(fileName, 'json'));\n        }\n        case 'csv': {\n            assert(isArray(safeData), MESSAGE_IS_ARRAY_FAIL);\n            var BOM = '\\ufeff';\n            var CSVData = createCSVData(safeData, delimiter);\n            var content = withBOM ? BOM + CSVData : CSVData;\n            return processor(content, exportType, normalizeFileName(fileName, 'csv'));\n        }\n        case 'xls': {\n            assert(isArray(safeData), MESSAGE_IS_ARRAY_FAIL);\n            var content = createXLSData(safeData);\n            return processor(content, exportType, normalizeFileName(fileName, 'xls'));\n        }\n        case 'xml': {\n            var content = createXMLData(safeData);\n            return processor(content, exportType, normalizeFileName(fileName, 'xml'));\n        }\n        default:\n            throw new Error(MESSAGE_UNKNOWN_EXPORT_TYPE);\n    }\n}\n(function (exportFromJSON) {\n    exportFromJSON.types = {\n        txt: 'txt',\n        json: 'json',\n        csv: 'csv',\n        xls: 'xls',\n        xml: 'xml',\n    };\n    exportFromJSON.processors = { downloadFile: downloadFile };\n})(exportFromJSON || (exportFromJSON = {}));\nexport default exportFromJSON;\n","import exportFromJSON from './exportFromJSON';\nexport default exportFromJSON;\n","import { render } from \"./Invoices.vue?vue&type=template&id=7f6bb049\"\nimport script from \"./Invoices.vue?vue&type=script&lang=js\"\nexport * from \"./Invoices.vue?vue&type=script&lang=js\"\n\nimport \"./Invoices.vue?vue&type=style&index=0&id=7f6bb049&lang=css\"\nscript.render = render\n\nexport default script","import axios from 'axios';\n\nconst username = process.env.VUE_APP_USER\nconst password = process.env.VUE_APP_PASSWORD\nconst url = process.env.VUE_APP_URL\n\nexport default class FamilyGroupService {\n    async getFamilyGroups() {\n        // return axios.get('assets/layout/data/familyGroups.json').then(res => res.data.data);\n        return axios.get(url + '/get-all-family-groups/', {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data.family_groups).catch(err => { throw err });\n    }\n\n    async addFamilyGroup(group) {\n        return axios.post(url + \"/add-family-group/\", group, {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data).catch(err => { throw err });\n    }\n\n    async archiveFamilyGroup(group){\n        return axios.post(url + \"/archive-family-group/\", group, {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data).catch(err => { throw err });\n    }\n\n    async addStudentToGroup(input){\n        return axios.post(url + \"/add-student-to-group/\", input, {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data).catch(err => { throw err });\n    }\n\n    async removeStudentFromGroup(input){\n        return axios.post(url + \"/remove-student-from-group/\", input, {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data).catch(err => { throw err });\n    }\n\n    async editFamilyGroup(input){\n        return axios.post(url + \"/edit-family-group/\", input, {\n            auth: {\n                username,\n                password\n            }\n        }).then(res => res.data).catch(err => { throw err });\n    }\n}\n"],"sourceRoot":""}