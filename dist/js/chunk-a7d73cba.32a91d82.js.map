{"version":3,"sources":["webpack:///./src/views/WeeklySchedule.vue?767d","webpack:///./src/views/WeeklySchedule.vue","webpack:///./src/views/WeeklySchedule.vue?9ef2"],"names":["class","style","for","events","filteredAppointments","options","ref","visible","eventDialog","header","modal","closable","mode","footer","label","icon","archiveAppointment","save","reset","clickedEvent","id","changedEvent","topic","required","disabled","autofocus","start","hourFormat","showTime","appendTo","end","placeholder","tutor_object","tutors","optionLabel","paid","onLabel","offLabel","togglePaid","data","title","allDay","plugins","defaultDate","Date","defaultView","left","center","right","editable","firstDay","eventClick","e","event","extendedProps","fullname","student","customButtons","prev","text","click","calendar","$refs","fullCalendar","next","appointments","students","tutorService","appointmentService","studentService","props","curTutor","Object","created","this","AppointmentService","StudentService","TutorService","mounted","getStudents","getUnarchivedTutors","map","tutor","first_name","last_name","getAppointments","results","forEach","appointment","start_date","end_date","find","s","t","length","showWarn","undefined","filter","app","console","log","response","watch","methods","findIndexById","index","i","editAppointment","format","res","return_status","showFail","return_message","setProp","setStart","setEnd","showSuccess","message","result","summary","detail","$toast","add","severity","life","render","__scopeId"],"mappings":"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","file":"js/chunk-a7d73cba.32a91d82.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./WeeklySchedule.vue?vue&type=style&index=0&id=28862366&lang=scss&scoped=true\"","<template>\n  <div class=\"p-grid\">\n    <div class=\"p-col-12\">\n      <div class=\"card\">\n        <div class=\"badges p-mb-2\">\n          <span class=\"p-tag\">Paid Sessions</span>\n          <span class=\"p-tag\" style=\"background-color: white; color: #007be5\"\n            >Unpaid Sessions</span\n          >\n        </div>\n        <FullCalendar\n          :events=\"filteredAppointments\"\n          :options=\"options\"\n          ref=\"fullCalendar\"\n        />\n\n        <Dialog\n          v-model:visible=\"eventDialog\"\n          :style=\"{ width: '450px' }\"\n          header=\"Session Details\"\n          :modal=\"true\"\n          :closable=\"true\"\n          v-on:hide=\"mode='view'\"\n        >\n          <!-- <Toast /> -->\n\n          <div class=\"p-fluid\">\n            <div class=\"p-field\">\n              <label for=\"title\">Topic</label>\n              <InputText\n                id=\"title\"\n                v-if=\"clickedEvent\"\n                v-model=\"changedEvent.topic\"\n                required=\"true\"\n                :disabled=\"mode == 'view'\"\n                autofocus\n              />\n            </div>\n            <div class=\"p-field\">\n              <label for=\"start\">From</label>\n              <Calendar\n                id=\"start\"\n                v-if=\"clickedEvent\"\n                v-model=\"changedEvent.start\"\n                hourFormat=\"12\"\n                :showTime=\"true\"\n                appendTo=\"body\"\n                :disabled=\"mode == 'view'\"\n              />\n            </div>\n            <div class=\"p-field\">\n              <label for=\"end\">To</label>\n              <Calendar\n                id=\"end\"\n                v-if=\"clickedEvent\"\n                v-model=\"changedEvent.end\"\n                hourFormat=\"12\"\n                :showTime=\"true\"\n                appendTo=\"body\"\n                :disabled=\"mode == 'view'\"\n              />\n            </div>\n            <div class=\"p-field\">\n              <label for=\"title\">Tutor</label>\n              <Dropdown\n                  placeholder=\"Select One\"\n                  v-if=\"clickedEvent\"\n                  v-model=\"changedEvent.tutor_object\"\n                  :options=\"tutors\"\n                  optionLabel=\"fullname\"\n                  :disabled=\"mode == 'view'\"\n                ></Dropdown>\n            </div>\n            <div class=\"p-field p-col-6 p-md-6\">\n              <label for=\"allday\">Paid</label>\n              <ToggleButton\n                id=\"allday\"\n                v-model=\"changedEvent.paid\"\n                onLabel=\"Yes\"\n                offLabel=\"No\"\n                @click=\"togglePaid\"\n                :disabled=\"mode!='view'\"\n              />\n            </div>\n          </div>\n          <template #footer>\n            <Button\n              label=\"Delete\"\n              icon=\"pi pi-trash\"\n              class=\"p-button-text p-button-danger\"\n              v-if=\"mode === 'view'\"\n              @click=\"archiveAppointment\"\n            />\n            <Button\n              label=\"Edit\"\n              icon=\"pi pi-user-edit\"\n              class=\"p-button-text\"\n              v-if=\"mode === 'view'\"\n              @click=\"mode = 'edit'\"\n            />\n\n            <Button\n              label=\"Save\"\n              icon=\"pi pi-check\"\n              class=\"p-button-text\"\n              @click=\"save\"\n              v-if=\"mode === 'edit'\"\n            />\n            <Button\n              label=\"Reset\"\n              icon=\"pi pi-refresh\"\n              class=\"p-button-text\"\n              @click=\"reset\"\n              v-if=\"mode === 'edit'\"\n            />\n          </template>\n        </Dialog>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AppointmentService from \"../service/AppointmentService\";\nimport TutorService from \"../service/TutorService\";\nimport StudentService from \"../service/StudentService\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport timeGridPlugin from \"@fullcalendar/timegrid\";\nimport interactionPlugin from \"@fullcalendar/interaction\";\nimport moment from \"moment\";\n\nexport default {\n  data() {\n    return {\n      eventDialog: false,\n      clickedEvent: null,\n      changedEvent: {\n        title: \"\",\n        start: null,\n        end: \"\",\n        allDay: null,\n        paid: null,\n      },\n      options: {\n        plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n        defaultDate: new Date(),\n        defaultView: \"timeGridWeek\",\n        header: {\n          left: \"prev,next\",\n          center: \"title\",\n          right: \"dayGridMonth,timeGridWeek,timeGridDay\",\n        },\n        editable: false,\n        firstDay:1,\n        eventClick: (e) => {\n          this.eventDialog = true;\n          // console.log(e);\n          this.clickedEvent = e.event;\n          // console.log(this.clickedEvent);\n          this.changedEvent.title = this.clickedEvent.title;\n          this.changedEvent.start = this.clickedEvent.start;\n          this.changedEvent.end = this.clickedEvent.end;\n          this.changedEvent.paid = this.clickedEvent.extendedProps.paid;\n          this.changedEvent.topic = this.clickedEvent.extendedProps.topic;\n          this.changedEvent.fullname = this.clickedEvent.extendedProps.fullname;\n          this.changedEvent.student = this.clickedEvent.extendedProps.student;\n          this.changedEvent.tutor_object = this.clickedEvent.extendedProps.tutor_object;\n        },\n        customButtons: {\n          prev: {\n            // this overrides the prev button\n            text: \"PREV\",\n            click: () => {\n              // console.log(\"eventPrev\");\n              const calendar = this.$refs.fullCalendar.calendar;\n              calendar.prev();\n              // console.log(calendar.calendar.view);\n            },\n          },\n          next: {\n            // this overrides the next button\n            text: \"NEXT\",\n            click: () => {\n              // console.log(\"eventNext\");\n              const calendar = this.$refs.fullCalendar.calendar;\n              calendar.next();\n              // console.log(calendar.calendar.view);\n            },\n          },\n        },\n      },\n      events: null,\n      appointments: null,\n      filteredAppointments:null,\n      students: null,\n      mode: \"view\",\n      tutors:null\n    };\n  },\n  tutorService: null,\n  appointmentService: null,\n  studentService: null,\n  props: {\n    curTutor: Object,\n  },\n  created() {\n    this.appointmentService = new AppointmentService();\n    this.studentService = new StudentService();\n    this.tutorService = new TutorService();\n  },\n  async mounted() {\n    try {\n      this.students = await this.studentService.getStudents();\n      this.tutors = await this.tutorService.getUnarchivedTutors();\n      this.tutors = this.tutors.map((tutor) => ({\n      ...tutor,\n      fullname: tutor.first_name + \" \" + tutor.last_name,\n    }));\n\n      const data = await this.appointmentService.getAppointments();\n      this.appointments = data.results;\n\n      // add necessary fields to all appointments\n      this.appointments.forEach((appointment) => {\n        appointment[\"start\"] = appointment.start_date;\n        appointment[\"end\"] = appointment.end_date;\n        if (!appointment.paid) {\n          appointment[\"backgroundColor\"] = \"white\";\n          appointment[\"textColor\"] = \"#007be5\";\n        }\n        const student = this.students.find((s) => {\n          return s.id == appointment[\"student\"];\n        });\n        appointment[\"fullname\"] = student.first_name + \" \" + student.last_name;\n        appointment[\"title\"] =\n          appointment[\"fullname\"] + (appointment.topic === \"\" ? \"\" : \": \" + appointment.topic)\n        const tutor = this.tutors.find((t) => {\n          return t.id == appointment[\"tutor\"];\n        });\n\n        appointment[\"tutor_object\"] = tutor;\n      });\n\n      if (this.appointments.length == 0) {\n        this.showWarn(\"No Sessions\", \"You have not added any sessions yet\");\n        return;\n      }\n\n      this.filteredAppointments = this.curTutor.id === undefined ? this.appointments : this.appointments.filter((app) => app.tutor === this.curTutor.id) \n\n    } catch (err) {\n      console.log(err.response);\n    }\n  },\n  watch: {\n    curTutor: function () {\n      this.filteredAppointments = this.curTutor.id === undefined ? this.appointments : this.appointments.filter((app) => app.tutor === this.curTutor.id)\n    },\n  },\n  methods: {\n    findIndexById(id) {\n      let index = -1;\n      for (let i = 0; i < this.events.length; i++) {\n        if (this.events[i].id === id) {\n          index = i;\n          break;\n        }\n      }\n\n      return index;\n    },\n    async save() {\n      try {\n        const res = await this.appointmentService.editAppointment({\n          appointment:this.clickedEvent.id,\n          start_date:moment(this.changedEvent.start).format(\"YYYY-MM-DDTHH:mm:ss\"),\n          end_date:moment(this.changedEvent.end).format(\"YYYY-MM-DDTHH:mm:ss\"),\n          student:this.changedEvent.student,\n          topic:this.changedEvent.topic,\n          paid:this.changedEvent.paid,\n          tutor:this.changedEvent.tutor_object.id\n        })\n        if (res.return_status != \"Success\") {\n          this.showFail(\"Edit Appointment Fail\", res.return_message);\n          return;\n        }\n        const tutor = this.tutors.find((t) => {\n          return t.id == res.appointments[\"tutor\"];\n        });\n        res.appointments = {\n          ...res.appointments,\n          tutor_object:tutor\n        }\n        this.clickedEvent.setProp(\n          \"extendedProps\",\n          res.appointments\n        );\n        this.clickedEvent.setStart(this.changedEvent.start);\n        this.clickedEvent.setEnd(this.changedEvent.end);\n        this.clickedEvent.setProp(\n          \"title\",\n          this.changedEvent.fullname + (this.changedEvent.topic === \"\" ? \"\" : \": \" + this.changedEvent.topic)\n        );\n        //  this.clickedEvent.setProp(\"extendedProps\", result.appointments);\n        // this.clickedEvent.setAllDay(this.changedEvent.allDay);\n\n        // this.changedEvent = { title: \"\", start: null, end: \"\", allDay: null };\n\n        this.showSuccess(\"Edit Success\", \"Successfully edited session\");\n        this.mode = \"view\";\n        this.eventDialog = false;\n\n        // console.log(this.clickedEvent);\n      } catch (err) {\n        console.log(err.response.data);\n        this.showFail(\"Edit Appointment Failed\", err.message);\n      }\n    },\n    reset() {\n      this.changedEvent.title = this.clickedEvent.title;\n      this.changedEvent.start = this.clickedEvent.start;\n      this.changedEvent.end = this.clickedEvent.end;\n      this.changedEvent.topic = this.clickedEvent.extendedProps.topic;\n    },\n    async togglePaid() {\n      // console.log(this.clickedEvent)\n      try {\n        const result = await this.appointmentService.togglePaid({\n          appointment: this.clickedEvent.id,\n        });\n        this.clickedEvent.setProp(\"extendedProps\", result.appointments);\n        if (result.appointments.paid) {\n          this.clickedEvent.setProp(\"backgroundColor\", \"#007be5\");\n          this.clickedEvent.setProp(\"textColor\", \"white\");\n        } else {\n          this.clickedEvent.setProp(\"backgroundColor\", \"white\");\n          this.clickedEvent.setProp(\"textColor\", \"#007be5\");\n        }\n        this.showSuccess(\n          \"Toggle Status Success\",\n          \"Successfully toggled paid status to \" + result.appointments.paid\n        );\n      } catch (err) {\n        console.log(err.response.data);\n        this.showFail(\"Failed to toggle status\", err);\n      }\n    },\n    async archiveAppointment() {\n      try {\n        await this.appointmentService.archiveAppointment({\n          appointment: this.clickedEvent.id,\n        });\n        this.appointments = this.appointments.filter((app) => {\n          return app.id != this.clickedEvent.id;\n        });\n        this.eventDialog = false;\n        this.showSuccess(\"Delete Success\", \"Successfully deleted session\");\n      } catch (err) {\n        console.log(err.response.data);\n        this.showFail(\"Delete Failed\", err.message);\n      }\n    },\n    showSuccess(summary, detail) {\n      this.$toast.add({\n        severity: \"success\",\n        summary,\n        detail,\n        life: 3000,\n      });\n    },\n    showFail(summary, detail) {\n      this.$toast.add({\n        severity: \"error\",\n        summary,\n        detail,\n        life: 3000,\n      });\n    },\n    showWarn(summary, detail) {\n      this.$toast.add({\n        severity: \"warn\",\n        summary,\n        detail,\n        life: 7000,\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.badges {\n  .p-badge,\n  .p-tag {\n    margin-right: 0.5rem;\n  }\n}\n</style>\n","import { render } from \"./WeeklySchedule.vue?vue&type=template&id=28862366&scoped=true\"\nimport script from \"./WeeklySchedule.vue?vue&type=script&lang=js\"\nexport * from \"./WeeklySchedule.vue?vue&type=script&lang=js\"\n\nimport \"./WeeklySchedule.vue?vue&type=style&index=0&id=28862366&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-28862366\"\n\nexport default script"],"sourceRoot":""}