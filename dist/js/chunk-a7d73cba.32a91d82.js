(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a7d73cba"],{"55ba":function(e,t,n){"use strict";n("728c")},"728c":function(e,t,n){},e970:function(e,t,n){"use strict";n.r(t);var i=n("7a23"),a=Object(i["Q"])("data-v-28862366");Object(i["x"])("data-v-28862366");var c={class:"p-grid"},o={class:"p-col-12"},r={class:"card"},s=Object(i["k"])("div",{class:"badges p-mb-2"},[Object(i["k"])("span",{class:"p-tag"},"Paid Sessions"),Object(i["k"])("span",{class:"p-tag",style:{"background-color":"white",color:"#007be5"}},"Unpaid Sessions")],-1),d={class:"p-fluid"},l={class:"p-field"},u=Object(i["k"])("label",{for:"title"},"Topic",-1),p={class:"p-field"},v=Object(i["k"])("label",{for:"start"},"From",-1),b={class:"p-field"},f=Object(i["k"])("label",{for:"end"},"To",-1),m={class:"p-field"},h=Object(i["k"])("label",{for:"title"},"Tutor",-1),g={class:"p-field p-col-6 p-md-6"},k=Object(i["k"])("label",{for:"allday"},"Paid",-1);Object(i["v"])();var E=a((function(e,t,n,E,j,O){var w=Object(i["C"])("FullCalendar"),x=Object(i["C"])("InputText"),S=Object(i["C"])("Calendar"),y=Object(i["C"])("Dropdown"),C=Object(i["C"])("ToggleButton"),D=Object(i["C"])("Button"),P=Object(i["C"])("Dialog");return Object(i["u"])(),Object(i["f"])("div",c,[Object(i["k"])("div",o,[Object(i["k"])("div",r,[s,Object(i["k"])(w,{events:j.filteredAppointments,options:j.options,ref:"fullCalendar"},null,8,["events","options"]),Object(i["k"])(P,{visible:j.eventDialog,"onUpdate:visible":t[7]||(t[7]=function(e){return j.eventDialog=e}),style:{width:"450px"},header:"Session Details",modal:!0,closable:!0,onHide:t[8]||(t[8]=function(e){return j.mode="view"})},{footer:a((function(){return["view"===j.mode?(Object(i["u"])(),Object(i["f"])(D,{key:0,label:"Delete",icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:O.archiveAppointment},null,8,["onClick"])):Object(i["g"])("",!0),"view"===j.mode?(Object(i["u"])(),Object(i["f"])(D,{key:1,label:"Edit",icon:"pi pi-user-edit",class:"p-button-text",onClick:t[6]||(t[6]=function(e){return j.mode="edit"})})):Object(i["g"])("",!0),"edit"===j.mode?(Object(i["u"])(),Object(i["f"])(D,{key:2,label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:O.save},null,8,["onClick"])):Object(i["g"])("",!0),"edit"===j.mode?(Object(i["u"])(),Object(i["f"])(D,{key:3,label:"Reset",icon:"pi pi-refresh",class:"p-button-text",onClick:O.reset},null,8,["onClick"])):Object(i["g"])("",!0)]})),default:a((function(){return[Object(i["k"])("div",d,[Object(i["k"])("div",l,[u,j.clickedEvent?(Object(i["u"])(),Object(i["f"])(x,{key:0,id:"title",modelValue:j.changedEvent.topic,"onUpdate:modelValue":t[1]||(t[1]=function(e){return j.changedEvent.topic=e}),required:"true",disabled:"view"==j.mode,autofocus:""},null,8,["modelValue","disabled"])):Object(i["g"])("",!0)]),Object(i["k"])("div",p,[v,j.clickedEvent?(Object(i["u"])(),Object(i["f"])(S,{key:0,id:"start",modelValue:j.changedEvent.start,"onUpdate:modelValue":t[2]||(t[2]=function(e){return j.changedEvent.start=e}),hourFormat:"12",showTime:!0,appendTo:"body",disabled:"view"==j.mode},null,8,["modelValue","disabled"])):Object(i["g"])("",!0)]),Object(i["k"])("div",b,[f,j.clickedEvent?(Object(i["u"])(),Object(i["f"])(S,{key:0,id:"end",modelValue:j.changedEvent.end,"onUpdate:modelValue":t[3]||(t[3]=function(e){return j.changedEvent.end=e}),hourFormat:"12",showTime:!0,appendTo:"body",disabled:"view"==j.mode},null,8,["modelValue","disabled"])):Object(i["g"])("",!0)]),Object(i["k"])("div",m,[h,j.clickedEvent?(Object(i["u"])(),Object(i["f"])(y,{key:0,placeholder:"Select One",modelValue:j.changedEvent.tutor_object,"onUpdate:modelValue":t[4]||(t[4]=function(e){return j.changedEvent.tutor_object=e}),options:j.tutors,optionLabel:"fullname",disabled:"view"==j.mode},null,8,["modelValue","options","disabled"])):Object(i["g"])("",!0)]),Object(i["k"])("div",g,[k,Object(i["k"])(C,{id:"allday",modelValue:j.changedEvent.paid,"onUpdate:modelValue":t[5]||(t[5]=function(e){return j.changedEvent.paid=e}),onLabel:"Yes",offLabel:"No",onClick:O.togglePaid,disabled:"view"!=j.mode},null,8,["modelValue","onClick","disabled"])])])]})),_:1},8,["visible"])])])])})),j=(n("4de4"),n("7db0"),n("d81d"),n("159b"),n("5530")),O=(n("96cf"),n("1da1")),w=n("d2b8"),x=n("54ef"),S=n("f1ac"),y=n("3cdd"),C=n.n(y),D=n("3e32"),P=n.n(D),T=n("a20c"),_=n.n(T),V=n("c1df"),F=n.n(V),A={data:function(){var e=this;return{eventDialog:!1,clickedEvent:null,changedEvent:{title:"",start:null,end:"",allDay:null,paid:null},options:{plugins:[C.a,P.a,_.a],defaultDate:new Date,defaultView:"timeGridWeek",header:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!1,firstDay:1,eventClick:function(t){e.eventDialog=!0,e.clickedEvent=t.event,e.changedEvent.title=e.clickedEvent.title,e.changedEvent.start=e.clickedEvent.start,e.changedEvent.end=e.clickedEvent.end,e.changedEvent.paid=e.clickedEvent.extendedProps.paid,e.changedEvent.topic=e.clickedEvent.extendedProps.topic,e.changedEvent.fullname=e.clickedEvent.extendedProps.fullname,e.changedEvent.student=e.clickedEvent.extendedProps.student,e.changedEvent.tutor_object=e.clickedEvent.extendedProps.tutor_object},customButtons:{prev:{text:"PREV",click:function(){var t=e.$refs.fullCalendar.calendar;t.prev()}},next:{text:"NEXT",click:function(){var t=e.$refs.fullCalendar.calendar;t.next()}}}},events:null,appointments:null,filteredAppointments:null,students:null,mode:"view",tutors:null}},tutorService:null,appointmentService:null,studentService:null,props:{curTutor:Object},created:function(){this.appointmentService=new w["a"],this.studentService=new S["a"],this.tutorService=new x["a"]},mounted:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.studentService.getStudents();case 3:return e.students=t.sent,t.next=6,e.tutorService.getUnarchivedTutors();case 6:return e.tutors=t.sent,e.tutors=e.tutors.map((function(e){return Object(j["a"])(Object(j["a"])({},e),{},{fullname:e.first_name+" "+e.last_name})})),t.next=10,e.appointmentService.getAppointments();case 10:if(n=t.sent,e.appointments=n.results,e.appointments.forEach((function(t){t["start"]=t.start_date,t["end"]=t.end_date,t.paid||(t["backgroundColor"]="white",t["textColor"]="#007be5");var n=e.students.find((function(e){return e.id==t["student"]}));t["fullname"]=n.first_name+" "+n.last_name,t["title"]=t["fullname"]+(""===t.topic?"":": "+t.topic);var i=e.tutors.find((function(e){return e.id==t["tutor"]}));t["tutor_object"]=i})),0!=e.appointments.length){t.next=16;break}return e.showWarn("No Sessions","You have not added any sessions yet"),t.abrupt("return");case 16:e.filteredAppointments=void 0===e.curTutor.id?e.appointments:e.appointments.filter((function(t){return t.tutor===e.curTutor.id})),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](0),console.log(t.t0.response);case 22:case"end":return t.stop()}}),t,null,[[0,19]])})))()},watch:{curTutor:function(){var e=this;this.filteredAppointments=void 0===this.curTutor.id?this.appointments:this.appointments.filter((function(t){return t.tutor===e.curTutor.id}))}},methods:{findIndexById:function(e){for(var t=-1,n=0;n<this.events.length;n++)if(this.events[n].id===e){t=n;break}return t},save:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.editAppointment({appointment:e.clickedEvent.id,start_date:F()(e.changedEvent.start).format("YYYY-MM-DDTHH:mm:ss"),end_date:F()(e.changedEvent.end).format("YYYY-MM-DDTHH:mm:ss"),student:e.changedEvent.student,topic:e.changedEvent.topic,paid:e.changedEvent.paid,tutor:e.changedEvent.tutor_object.id});case 3:if(n=t.sent,"Success"==n.return_status){t.next=7;break}return e.showFail("Edit Appointment Fail",n.return_message),t.abrupt("return");case 7:i=e.tutors.find((function(e){return e.id==n.appointments["tutor"]})),n.appointments=Object(j["a"])(Object(j["a"])({},n.appointments),{},{tutor_object:i}),e.clickedEvent.setProp("extendedProps",n.appointments),e.clickedEvent.setStart(e.changedEvent.start),e.clickedEvent.setEnd(e.changedEvent.end),e.clickedEvent.setProp("title",e.changedEvent.fullname+(""===e.changedEvent.topic?"":": "+e.changedEvent.topic)),e.showSuccess("Edit Success","Successfully edited session"),e.mode="view",e.eventDialog=!1,t.next=22;break;case 18:t.prev=18,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Edit Appointment Failed",t.t0.message);case 22:case"end":return t.stop()}}),t,null,[[0,18]])})))()},reset:function(){this.changedEvent.title=this.clickedEvent.title,this.changedEvent.start=this.clickedEvent.start,this.changedEvent.end=this.clickedEvent.end,this.changedEvent.topic=this.clickedEvent.extendedProps.topic},togglePaid:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.togglePaid({appointment:e.clickedEvent.id});case 3:n=t.sent,e.clickedEvent.setProp("extendedProps",n.appointments),n.appointments.paid?(e.clickedEvent.setProp("backgroundColor","#007be5"),e.clickedEvent.setProp("textColor","white")):(e.clickedEvent.setProp("backgroundColor","white"),e.clickedEvent.setProp("textColor","#007be5")),e.showSuccess("Toggle Status Success","Successfully toggled paid status to "+n.appointments.paid),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Failed to toggle status",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},archiveAppointment:function(){var e=this;return Object(O["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.archiveAppointment({appointment:e.clickedEvent.id});case 3:e.appointments=e.appointments.filter((function(t){return t.id!=e.clickedEvent.id})),e.eventDialog=!1,e.showSuccess("Delete Success","Successfully deleted session"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Delete Failed",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showSuccess:function(e,t){this.$toast.add({severity:"success",summary:e,detail:t,life:3e3})},showFail:function(e,t){this.$toast.add({severity:"error",summary:e,detail:t,life:3e3})},showWarn:function(e,t){this.$toast.add({severity:"warn",summary:e,detail:t,life:7e3})}}};n("55ba");A.render=E,A.__scopeId="data-v-28862366";t["default"]=A}}]);
//# sourceMappingURL=chunk-a7d73cba.32a91d82.js.map