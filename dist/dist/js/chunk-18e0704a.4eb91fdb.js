(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18e0704a"],{"2f71":function(e,t,n){"use strict";n("f2a3")},c013:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),l=Object(a["Q"])("data-v-c5cd721a");Object(a["x"])("data-v-c5cd721a");var c={class:"p-grid"},i={class:"p-col-12"},u={class:"card"},d={class:"table-header"},o=Object(a["j"])(" List of Students "),r={class:"p-input-icon-left"},s=Object(a["k"])("i",{class:"pi pi-search"},null,-1),b=Object(a["j"])(" No students found. "),f=Object(a["j"])(" Loading students data. Please wait. "),p={class:"p-buttonset"},h={class:"p-grid p-fluid"},m={class:"p-field p-col-6"},O=Object(a["k"])("label",null,"First Name",-1),j={class:"p-field p-col-6"},v=Object(a["k"])("label",null,"Last Name",-1),S={class:"p-field p-col-6"},g=Object(a["k"])("label",null,"Email",-1),k={class:"p-field p-col-6"},y=Object(a["k"])("label",null,"Birth Date",-1),w={class:"p-field p-col-6"},_=Object(a["k"])("label",null,"School",-1),C={class:"p-field p-col-6"},V=Object(a["k"])("label",null,"Contact Number",-1),x={class:"p-field p-col-6"},F=Object(a["k"])("label",null,"Rate",-1),D={key:0,class:"p-field p-col-6"},U=Object(a["k"])("label",null,"Family Group",-1),G={class:"p-field p-col-6"},R=Object(a["k"])("label",null,"Avatar",-1),A={class:"center"},N={key:1,style:{"text-align":"center"}},q={key:0},E={key:1},B=Object(a["k"])("div",{class:"confirmation-content"},[Object(a["k"])("i",{class:"pi pi-exclamation-triangle p-mr-3",style:{"font-size":"2rem"}}),Object(a["k"])("span",null,"Are you sure you want to archive?")],-1);Object(a["v"])();var L=l((function(e,t,n,L,Y,H){var I=Object(a["C"])("Dropdown"),M=Object(a["C"])("InputText"),T=Object(a["C"])("Column"),J=Object(a["C"])("Button"),$=Object(a["C"])("DataTable"),z=Object(a["C"])("Calendar"),K=Object(a["C"])("SelectButton"),P=Object(a["C"])("Dialog");return Object(a["u"])(),Object(a["f"])("div",c,[Object(a["k"])("div",i,[Object(a["k"])("div",u,[Object(a["k"])($,{value:Y.filteredStudents,paginator:!0,class:"p-datatable-customers",rows:10,dataKey:"id",rowHover:!0,selection:Y.selectedStudents,"onUpdate:selection":t[3]||(t[3]=function(e){return Y.selectedStudents=e}),loading:Y.loading},{header:l((function(){return[Object(a["k"])("div",d,[o,Object(a["k"])(I,{modelValue:Y.filterOption,"onUpdate:modelValue":t[1]||(t[1]=function(e){return Y.filterOption=e}),options:Y.filterOptions,placeholder:"Select One"},null,8,["modelValue","options"]),Object(a["k"])("span",r,[s,Object(a["k"])(M,{modelValue:Y.filters1["global"],"onUpdate:modelValue":t[2]||(t[2]=function(e){return Y.filters1["global"]=e}),placeholder:"Global Search"},null,8,["modelValue"])])])]})),empty:l((function(){return[b]})),loading:l((function(){return[f]})),default:l((function(){return[Object(a["k"])(T,{selectionMode:"multiple",headerStyle:"width: 3em"}),Object(a["k"])(T,{header:"First Name",sortable:!0},{body:l((function(e){return[Object(a["j"])(Object(a["G"])(e.data.first_name),1)]})),_:1}),Object(a["k"])(T,{header:"Last Name",sortable:!0},{body:l((function(e){return[Object(a["j"])(Object(a["G"])(e.data.last_name),1)]})),_:1}),Object(a["k"])(T,{field:"school",header:"School",sortable:!0},{body:l((function(e){return[Object(a["j"])(Object(a["G"])(e.data.school),1)]})),_:1}),Object(a["k"])(T,{field:"rate",header:"Rate",sortable:!0},{body:l((function(e){return[Object(a["k"])("span",null,Object(a["G"])(e.data.rate),1)]})),_:1}),Object(a["k"])(T,{headerStyle:"width: 10rem; text-align: center",bodyStyle:"text-align: center; overflow: visible"},{body:l((function(e){return[Object(a["k"])("span",p,[Object(a["k"])(J,{type:"button",icon:"pi pi-search",class:"p-button-info",onClick:function(t){return H.openDialog(e.data,"view")}},null,8,["onClick"]),Object(a["k"])(J,{type:"button",icon:"pi pi-trash",class:"p-button-danger",disabled:e.data.archive,onClick:function(t){return H.openConfirmation(e.data)}},null,8,["disabled","onClick"])])]})),_:1})]})),_:1},8,["value","selection","loading"]),Object(a["k"])(P,{visible:Y.studentDialog,"onUpdate:visible":t[14]||(t[14]=function(e){return Y.studentDialog=e}),style:{width:"750px"},header:"Student Details",modal:!0,closable:!0},{footer:l((function(){return["view"===Y.mode?(Object(a["u"])(),Object(a["f"])("div",q,[Object(a["k"])(J,{label:"Edit",icon:"pi pi-user-edit",class:"p-button-text",onClick:t[13]||(t[13]=function(t){return Y.mode=e.edit})})])):Object(a["g"])("",!0),"view"!=Y.mode?(Object(a["u"])(),Object(a["f"])("div",E,[Object(a["k"])(J,{label:"Save",icon:"pi pi-check",class:"p-button-text",disabled:!H.isChanged,onClick:H.save},null,8,["disabled","onClick"]),Object(a["k"])(J,{label:"Reset",icon:"pi pi-refresh",class:"p-button-text",onClick:H.resetStudent},null,8,["onClick"])])):Object(a["g"])("",!0)]})),default:l((function(){return[Object(a["k"])("div",h,[Object(a["k"])("div",m,[O,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.first_name,"onUpdate:modelValue":t[4]||(t[4]=function(e){return Y.changedStudent.first_name=e}),required:"true",disabled:"view"===Y.mode,autofocus:""},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",j,[v,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.last_name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return Y.changedStudent.last_name=e}),required:"true",disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",S,[g,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.email,"onUpdate:modelValue":t[6]||(t[6]=function(e){return Y.changedStudent.email=e}),required:"true",disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",k,[y,Y.curStudent?(Object(a["u"])(),Object(a["f"])(z,{key:0,modelValue:Y.changedStudent.birthday,"onUpdate:modelValue":t[7]||(t[7]=function(e){return Y.changedStudent.birthday=e}),showIcon:!0,showButtonBar:!0,disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",w,[_,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.school,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Y.changedStudent.school=e}),required:"true",disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",C,[V,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.contact_number,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Y.changedStudent.contact_number=e}),required:"true",disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",x,[F,Y.curStudent?(Object(a["u"])(),Object(a["f"])(M,{key:0,modelValue:Y.changedStudent.rate,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Y.changedStudent.rate=e}),required:"true",disabled:"view"===Y.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),null!=Y.changedStudent.family_group?(Object(a["u"])(),Object(a["f"])("div",D,[U,Y.curStudent?(Object(a["u"])(),Object(a["f"])(I,{key:0,modelValue:Y.changedStudent.family_group_obj,"onUpdate:modelValue":t[11]||(t[11]=function(e){return Y.changedStudent.family_group_obj=e}),options:e.familyGroups,placeholder:"Select One",optionLabel:"name",disabled:"view"===Y.mode},null,8,["modelValue","options","disabled"])):Object(a["g"])("",!0)])):Object(a["g"])("",!0),Object(a["k"])("div",G,[R,Object(a["k"])(K,{modelValue:Y.changedStudent.avatars,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Y.changedStudent.avatars=e}),options:Y.avatars,disabled:"view"===Y.mode},{option:l((function(e){return[Object(a["k"])("div",A,[e.option?(Object(a["u"])(),Object(a["f"])("img",{key:0,alt:e.option,src:"assets/layout/images/"+e.option},null,8,["alt","src"])):(Object(a["u"])(),Object(a["f"])("div",N,"None"))])]})),_:1},8,["modelValue","options","disabled"])])])]})),_:1},8,["visible"]),Object(a["k"])(P,{header:"Confirmation",visible:Y.displayConfirmation,"onUpdate:visible":t[15]||(t[15]=function(e){return Y.displayConfirmation=e}),style:{width:"350px"},modal:!0},{footer:l((function(){return[Object(a["k"])(J,{label:"No",icon:"pi pi-times",onClick:H.closeConfirmation,class:"p-button-text"},null,8,["onClick"]),Object(a["k"])(J,{label:"Yes",icon:"pi pi-check",onClick:H.archiveStudent,class:"p-button-text",autofocus:""},null,8,["onClick"])]})),default:l((function(){return[B]})),_:1},8,["visible"])])])])})),Y=(n("4de4"),n("7db0"),n("d81d"),n("b64b"),n("159b"),n("5530")),H=(n("96cf"),n("1da1")),I=n("f1ac"),M=n("952e"),T=n("c1df"),J=n.n(T),$=n("2ef0"),z=n.n($),K={data:function(){return{selectedStudents:null,filters1:{},loading:!0,students:null,studentDialog:!1,curStudent:null,changedStudent:null,mode:null,displayConfirmation:!1,filterOption:"Active Only",filterOptions:["All Students","Active Only","Archived Only"],filteredStudents:[],avatars:["","avatar_1.png","avatar_2.png","avatar_3.png","avatar_4.png"]}},studentService:null,familyGroupService:null,created:function(){this.studentService=new I["a"],this.familyGroupService=new M["a"]},mounted:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.familyGroupService.getFamilyGroups();case 3:return e.familyGroups=t.sent,t.next=6,e.studentService.getStudents();case 6:e.students=t.sent,e.students=e.students.map((function(t){return Object(Y["a"])(Object(Y["a"])({},t),{},{birthday:new Date(t.birthday),fullname:t.first_name+" "+t.last_name,family_group_obj:e.familyGroups.find((function(e){return e.id==t.family_group}))})})),console.log(e.students),e.refreshFilter(e.filterOption),e.showSuccess("Retrieve Students Success","Successfully retrieved "+e.students.length+" students"),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),e.showFail("Retrieve Students Fail",t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))()},watch:{filterOption:function(e){this.refreshFilter(e)}},computed:{isChanged:function(){return!z.a.isEqual(this.curStudent,this.changedStudent)}},methods:{openDialog:function(e,t){this.curStudent=e,this.changedStudent=Object(Y["a"])({},e),this.studentDialog=!0,this.mode=t},openConfirmation:function(e){this.curStudent=e,this.displayConfirmation=!0},closeConfirmation:function(){this.displayConfirmation=!1},archiveStudent:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.studentService.archiveStudent({student:e.curStudent.id});case 3:e.curStudent.archive=!0,console.log(e.students),e.refreshFilter(e.filterOption),e.showSuccess("Archive Student Success","Successfully archived "+e.curStudent.fullname),e.curStudent=null,e.closeConfirmation(),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Archive Fail",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,11]])})))()},refreshFilter:function(e){this.filteredStudents=this.students.filter((function(t){return"All Students"==e||("Active Only"==e?!t.archive:t.archive)}))},save:function(){var e=this;return Object(H["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.studentService.editStudent(Object(Y["a"])(Object(Y["a"])({},e.changedStudent),{},{birthday:J()(e.changedStudent.birthday).format("YYYY-MM-DDTHH:mm:ss"),student:e.changedStudent.id,family_group:null==e.changedStudent.family_group?"":e.changedStudent.family_group_obj.id}));case 3:if(n=t.sent,"Success"==n.return_status){t.next=7;break}return e.showFail("Edit Student Fail",n.return_message),t.abrupt("return");case 7:Object.keys(e.curStudent).forEach((function(t){e.curStudent[t]=e.changedStudent[t]})),e.changedStudent=Object(Y["a"])({},e.curStudent),e.refreshFilter(e.filterOption),e.showSuccess("Edit Student Success","Successfully edited "+e.changedStudent.first_name+" "+e.changedStudent.last_name),e.mode="view",t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Edit Fail",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,14]])})))()},showSuccess:function(e,t){this.$toast.add({severity:"success",summary:e,detail:t,life:3e3})},showFail:function(e,t){this.$toast.add({severity:"error",summary:e,detail:t,life:3e3})},resetStudent:function(){this.changedStudent=Object(Y["a"])({},this.curStudent)}}};n("2f71");K.render=L,K.__scopeId="data-v-c5cd721a";t["default"]=K},f2a3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-18e0704a.4eb91fdb.js.map