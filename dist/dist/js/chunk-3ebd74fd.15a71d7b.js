(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ebd74fd"],{"0347":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("d4ec"),c=n("bee2"),i=n("bc3a"),s=n.n(i),d=function(){function e(){Object(a["a"])(this,e)}return Object(c["a"])(e,[{key:"getEvents",value:function(){return s.a.get("assets/layout/data/events.json").then((function(e){return e.data.data}))}}]),e}()},acf4:function(e,t,n){"use strict";n("d796")},d796:function(e,t,n){},e970:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),c=Object(a["Q"])("data-v-3abfdea4");Object(a["x"])("data-v-3abfdea4");var i={class:"p-grid"},s={class:"p-col-12"},d={class:"card"},o=Object(a["k"])("div",{class:"badges p-mb-2"},[Object(a["k"])("span",{class:"p-tag"},"Paid Sessions"),Object(a["k"])("span",{class:"p-tag",style:{"background-color":"white",color:"#007be5"}},"Unpaid Sessions")],-1),l={class:"p-fluid"},r={class:"p-field"},u=Object(a["k"])("label",{for:"title"},"Topic",-1),p={class:"p-field"},v=Object(a["k"])("label",{for:"start"},"From",-1),b={class:"p-field"},f=Object(a["k"])("label",{for:"end"},"To",-1),h={class:"p-field p-col-6 p-md-6"},m=Object(a["k"])("label",{for:"allday"},"Paid",-1);Object(a["v"])();var g=c((function(e,t,n,g,k,E){var j=Object(a["C"])("FullCalendar"),O=Object(a["C"])("InputText"),w=Object(a["C"])("Calendar"),x=Object(a["C"])("ToggleButton"),y=Object(a["C"])("Button"),S=Object(a["C"])("Dialog");return Object(a["u"])(),Object(a["f"])("div",i,[Object(a["k"])("div",s,[Object(a["k"])("div",d,[o,Object(a["k"])(j,{events:k.appointments,options:k.options,ref:"fullCalendar"},null,8,["events","options"]),Object(a["k"])(S,{visible:k.eventDialog,"onUpdate:visible":t[6]||(t[6]=function(e){return k.eventDialog=e}),style:{width:"450px"},header:"Session Details",modal:!0,closable:!0,onHide:t[7]||(t[7]=function(e){return k.mode="view"})},{footer:c((function(){return["view"===k.mode?(Object(a["u"])(),Object(a["f"])(y,{key:0,label:"Delete",icon:"pi pi-trash",class:"p-button-text p-button-danger",onClick:E.archiveAppointment},null,8,["onClick"])):Object(a["g"])("",!0),"view"===k.mode?(Object(a["u"])(),Object(a["f"])(y,{key:1,label:"Edit",icon:"pi pi-user-edit",class:"p-button-text",onClick:t[5]||(t[5]=function(e){return k.mode="edit"})})):Object(a["g"])("",!0),"edit"===k.mode?(Object(a["u"])(),Object(a["f"])(y,{key:2,label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:E.save},null,8,["onClick"])):Object(a["g"])("",!0),"edit"===k.mode?(Object(a["u"])(),Object(a["f"])(y,{key:3,label:"Reset",icon:"pi pi-refresh",class:"p-button-text",onClick:E.reset},null,8,["onClick"])):Object(a["g"])("",!0)]})),default:c((function(){return[Object(a["k"])("div",l,[Object(a["k"])("div",r,[u,k.clickedEvent?(Object(a["u"])(),Object(a["f"])(O,{key:0,id:"title",modelValue:k.changedEvent.topic,"onUpdate:modelValue":t[1]||(t[1]=function(e){return k.changedEvent.topic=e}),required:"true",disabled:"view"==k.mode,autofocus:""},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",p,[v,k.clickedEvent?(Object(a["u"])(),Object(a["f"])(w,{key:0,id:"start",modelValue:k.changedEvent.start,"onUpdate:modelValue":t[2]||(t[2]=function(e){return k.changedEvent.start=e}),hourFormat:"12",showTime:!0,appendTo:"body",disabled:"view"==k.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",b,[f,k.clickedEvent?(Object(a["u"])(),Object(a["f"])(w,{key:0,id:"end",modelValue:k.changedEvent.end,"onUpdate:modelValue":t[3]||(t[3]=function(e){return k.changedEvent.end=e}),hourFormat:"12",showTime:!0,appendTo:"body",disabled:"view"==k.mode},null,8,["modelValue","disabled"])):Object(a["g"])("",!0)]),Object(a["k"])("div",h,[m,Object(a["k"])(x,{id:"allday",modelValue:k.changedEvent.paid,"onUpdate:modelValue":t[4]||(t[4]=function(e){return k.changedEvent.paid=e}),onLabel:"Yes",offLabel:"No",onClick:E.togglePaid,disabled:"view"!=k.mode},null,8,["modelValue","onClick","disabled"])])])]})),_:1},8,["visible"])])])])})),k=(n("4de4"),n("7db0"),n("159b"),n("96cf"),n("1da1")),E=n("d2b8"),j=n("0347"),O=n("f1ac"),w=n("3cdd"),x=n.n(w),y=n("3e32"),S=n.n(y),C=n("a20c"),P=n.n(C),D=n("c1df"),V=n.n(D),F={data:function(){var e=this;return{eventDialog:!1,clickedEvent:null,changedEvent:{title:"",start:null,end:"",allDay:null,paid:null},options:{plugins:[x.a,S.a,P.a],defaultDate:new Date,defaultView:"timeGridWeek",header:{left:"prev,next",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},editable:!1,eventClick:function(t){e.eventDialog=!0,e.clickedEvent=t.event,console.log(e.clickedEvent),e.changedEvent.title=e.clickedEvent.title,e.changedEvent.start=e.clickedEvent.start,e.changedEvent.end=e.clickedEvent.end,e.changedEvent.paid=e.clickedEvent.extendedProps.paid,e.changedEvent.topic=e.clickedEvent.extendedProps.topic,e.changedEvent.fullname=e.clickedEvent.extendedProps.fullname,e.changedEvent.student=e.clickedEvent.extendedProps.student},customButtons:{prev:{text:"PREV",click:function(){var t=e.$refs.fullCalendar.calendar;t.prev()}},next:{text:"NEXT",click:function(){var t=e.$refs.fullCalendar.calendar;t.next()}}}},events:null,appointments:null,students:null,mode:"view"}},eventService:null,appointmentService:null,studentService:null,created:function(){this.eventService=new j["a"],this.appointmentService=new E["a"],this.studentService=new O["a"]},mounted:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.studentService.getStudents();case 3:return e.students=t.sent,t.next=6,e.appointmentService.getAppointments();case 6:n=t.sent,e.appointments=n.results,e.appointments.forEach((function(t){t["start"]=t.start_date,t["end"]=t.end_date,t.paid||(t["backgroundColor"]="white",t["textColor"]="#007be5");var n=e.students.find((function(e){return e.id==t["student"]}));t["fullname"]=n.first_name+" "+n.last_name,t["title"]=t["fullname"]+": "+t.topic})),0==e.appointments.length&&e.showWarn("No Sessions","You have not added any sessions yet"),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),console.log(t.t0.response);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},methods:{findIndexById:function(e){for(var t=-1,n=0;n<this.events.length;n++)if(this.events[n].id===e){t=n;break}return t},save:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.editAppointment({appointment:e.clickedEvent.id,start_date:V()(e.changedEvent.start).format("YYYY-MM-DDTHH:mm:ss"),end_date:V()(e.changedEvent.end).format("YYYY-MM-DDTHH:mm:ss"),student:e.changedEvent.student,topic:e.changedEvent.topic,paid:e.changedEvent.paid});case 3:if(n=t.sent,"Success"==n.return_status){t.next=7;break}return e.showFail("Edit Appointment Fail",n.return_message),t.abrupt("return");case 7:e.clickedEvent.setProp("extendedProps",n.appointments),e.clickedEvent.setStart(e.changedEvent.start),e.clickedEvent.setEnd(e.changedEvent.end),e.clickedEvent.setProp("title",e.changedEvent.fullname+": "+e.changedEvent.topic),e.showSuccess("Edit Success","Successfully edited session"),e.mode="view",e.eventDialog=!1,t.next=20;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Edit Appointment Failed",t.t0.message);case 20:case"end":return t.stop()}}),t,null,[[0,16]])})))()},reset:function(){this.changedEvent.title=this.clickedEvent.title,this.changedEvent.start=this.clickedEvent.start,this.changedEvent.end=this.clickedEvent.end,this.changedEvent.topic=this.clickedEvent.extendedProps.topic},togglePaid:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.togglePaid({appointment:e.clickedEvent.id});case 3:n=t.sent,e.clickedEvent.setProp("extendedProps",n.appointments),n.appointments.paid?(e.clickedEvent.setProp("backgroundColor","#007be5"),e.clickedEvent.setProp("textColor","white")):(e.clickedEvent.setProp("backgroundColor","white"),e.clickedEvent.setProp("textColor","#007be5")),e.showSuccess("Toggle Status Success","Successfully toggled paid status to "+n.appointments.paid),t.next=13;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Failed to toggle status",t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,9]])})))()},archiveAppointment:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.appointmentService.archiveAppointment({appointment:e.clickedEvent.id});case 3:e.appointments=e.appointments.filter((function(t){return t.id!=e.clickedEvent.id})),e.eventDialog=!1,e.showSuccess("Delete Success","Successfully deleted session"),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0.response.data),e.showFail("Delete Failed",t.t0.message);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))()},showSuccess:function(e,t){this.$toast.add({severity:"success",summary:e,detail:t,life:3e3})},showFail:function(e,t){this.$toast.add({severity:"error",summary:e,detail:t,life:3e3})},showWarn:function(e,t){this.$toast.add({severity:"warn",summary:e,detail:t,life:7e3})}}};n("acf4");F.render=g,F.__scopeId="data-v-3abfdea4";t["default"]=F}}]);
//# sourceMappingURL=chunk-3ebd74fd.15a71d7b.js.map